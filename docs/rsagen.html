<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>rsagen</title>
<script src="wasm_exec.js"></script>
<script>
'use strict';

const decoder = new TextDecoder('utf-8');
global.fs.writeSync = function(fd, buf) {
  window.parent.setKey(decoder.decode(buf));
  return buf.length;
};

const keyStrength = !window.location.hash ? '2048' : window.location.hash.substring(1);
const go = new Go();
go.argv = ['rsagen.wasm', keyStrength];
WebAssembly.instantiateStreaming(fetch('rsagen.wasm', { cache: 'force-cache' }), go.importObject).then((result) => {
  go.run(result.instance);
});
</script>
</head>
<body></body>
</html>